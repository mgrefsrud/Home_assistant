- id: 1_bathroom_turn_on_light_when_there_is_movement
  alias: 1 bathroom turn on light when there is movement
  trigger:
    platform: numeric_state
    entity_id: sensor.1_bathroom_sensor_burglar
    above: '0'
  action:
  - service: light.turn_on
    data:
      entity_id: light.1_bathroom_spotlights
      brightness: 255
  - condition: and
    conditions:
    - condition: state
      entity_id: input_select.time_of_day_dropdown
      state: Dagtid
  - service: homeassistant.turn_on
    entity_id:
    - switch.1_bathroom_light_switch
- id: 1_bathroom_turn_on_fan_when_there_is_movement
  alias: 1 bathroom turn on fan when there is movement
  trigger:
    platform: numeric_state
    entity_id: sensor.1_bathroom_sensor_burglar
    above: '0'
  condition:
    condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.1_bathroom_fan_switch
- id: 1_bathroom_turn_off_light_when_there_is_no_movement
  alias: 1 bathroom turn off light when there is no movement
  trigger:
    platform: numeric_state
    entity_id: sensor.1_bathroom_sensor_burglar
    below: '1'
    for:
      minutes: '10'
  action:
    service: homeassistant.turn_off
    entity_id:
    - switch.1_bathroom_light_switch
    - light.1_bathroom_spotlights
- id: 1_bathroom_turn_on_fan_when_there_is_high_humidity
  alias: 1 bathroom turn on fan when there is high humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.1_bathroom_sensor_relative_humidity
    above: '55'
    below: '100'
    for:
      minutes: 5
  action:
  - service: homeassistant.turn_on
    entity_id:
    - switch.1_bathroom_fan_switch
- id: 1_bathroom_turn_off_fan_when_there_is_low_humidity
  alias: 1 bathroom turn off fan when there is low humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.1_bathroom_sensor_relative_humidity
    above: '0'
    below: '54'
    for:
      minutes: 10
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.1_bathroom_fan_switch
- id: 1_bathroom_turn_off_fan_after_5_minutes_if_there_is_low_humidity
  alias: 1 bathroom turn off fan after 5 minutes if there is low humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.1_bathroom_sensor_burglar
    below: '1'
    for:
      minutes: '10'
  condition:
    condition: numeric_state
    entity_id: sensor.1_bathroom_sensor_relative_humidity
    above: '0'
    below: '54'
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.1_bathroom_fan_switch
- id: 1_bathroom_turn_down_thermostat_evening
  alias: 1 bathroom turn down thermostat evening
  trigger:
    platform: time
    at: '23:00:00'
  condition:
    condition: state
    entity_id: binary_sensor.alle_bortreist
    state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bathroom_thermostat_mode
      temperature: 10
      hvac_mode: heat
- id: 1_bathroom_turn_up_thermostat_morning
  alias: 1 bathroom turn up thermostat morning
  trigger:
    platform: time
    at: 05:30:00
  condition:
    condition: state
    entity_id: binary_sensor.alle_bortreist
    state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bathroom_thermostat_mode
      temperature: 20
      hvac_mode: heat
- id: 1_bedroom_k_set_temp_22_morning_weekdays
  alias: 1 bedroom k set temp 22 morning weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_k_morning_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.1_bedroom_k_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 1_bedroom_k_set_temp_16_evening_weekdays
  alias: 1 bedroom k set temp 16 evening weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_k_evening_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.1_bedroom_k_thermostat
      hvac_mode: heat
      temperature: 16
    service: climate.set_temperature
- id: 1_bedroom_k_set_temp_22_morning_weekend
  alias: 1 bedroom k set temp 22 morning weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_k_morning_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.1_bedroom_k_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 1_bedroom_k_set_temp_16_evening_weekend
  alias: 1 bedroom k set temp 16 evening weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_k_evening_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.1_bedroom_k_thermostat
      hvac_mode: heat
      temperature: 16
    service: climate.set_temperature
- id: 1_bedroom_k_set_temp_16_during_school
  alias: 1 bedroom k set temp 16 during school
  trigger:
    platform: time
    at: 08:00:00
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bedroom_k_thermostat
      temperature: 16
      hvac_mode: heat
- id: 1_bedroom_k_set_temp_22_after_school
  alias: 1 bedroom k set temp 22 after  school
  trigger:
  - at: '14:30:00'
    platform: time
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.1_bedroom_k_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 1_bedroom_k_set_temp_22_after_school_wed
  alias: 1 bedroom k set temp 22 after school wed
  trigger:
    platform: time
    at: '11:30:00'
  condition:
    condition: and
    conditions:
    - condition: time
      weekday:
      - wed
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bedroom_k_thermostat
      temperature: 22
      hvac_mode: heat
- id: 1_bedroom_k_alert_above_25_degrees
  alias: 1 bedroom k alert temperature above 25
  trigger:
  - above: '25'
    entity_id: sensor.2_bedroom_k_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det over 25 grader på rommet til Karoline
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 1_hall_turn_down_thermostat_evening
  alias: 1 hall turn down thermostat evening
  trigger:
    platform: time
    at: '23:00:00'
  condition:
    condition: state
    entity_id: binary_sensor.alle_bortreist
    state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.1_hall_thermostat_mode
      temperature: 10
      hvac_mode: heat
- id: 1_hall_turn_up_thermostat_morning
  alias: 1 hall turn up thermostat morning
  trigger:
    platform: time
    at: 04:30:00
  condition:
    condition: state
    entity_id: binary_sensor.alle_bortreist
    state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.1_hall_thermostat_mode
      temperature: 18
      hvac_mode: heat
- id: 1_hall_lock_frontdoor_23
  alias: 1 hall lock frontdoor night
  trigger:
  - entity_id: input_select.time_of_day_dropdown
    from: Dagtid
    platform: state
    to: Natt
  action:
  - entity_id:
    - switch.yale_lock
    service: homeassistant.turn_on
- id: 1_hall_lock_frontdoor_automatic_23-06
  alias: 1 hall lock frontdoor automatic 23-06
  trigger:
    platform: state
    entity_id: switch.yale_lock
    from: 'on'
    to: 'off'
  condition:
    condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Natt
  action:
  - delay: 0:00:30
  - service: homeassistant.turn_on
    entity_id:
    - switch.yale_lock
- id: 1_hall_lock_frontdoor_when_no_one_is_home
  alias: 1 hall lock frontdoor when no one is home
  trigger:
    platform: state
    entity_id: binary_sensor.noen_hjemme_absolutt
    from: 'on'
    to: 'off'
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.yale_lock
- id: 1_hall_frontdoor_warning_mg
  alias: 1 hall frontdoor warning mg
  trigger:
    platform: state
    entity_id: binary_sensor.1_hall_front_door_sensor
    from: 'off'
    to: 'on'
    for:
      minutes: '5'
  action:
  - condition: state
    entity_id: device_tracker.morten_mobile
    state: home
  - service: notify.mobile_app_morten_app
    data:
      message: Utgangsdøra har stått oppe i mer enn 5 minutter
      data:
        push:
          badge: 5
- id: 1_hall_frontdoor_warning_hg
  alias: 1 hall frontdoor warning hg
  trigger:
    platform: state
    entity_id: binary_sensor.1_hall_front_door_sensor
    from: 'off'
    to: 'on'
    for:
      minutes: '5'
  action:
  - condition: state
    entity_id: device_tracker.helen_mobile
    state: home
  - service: notify.mobile_app_helen_app
    data:
      message: Utgangsdøra har stått oppe i mer enn 5 minutter
      data:
        push:
          badge: 5
- id: 1_hall_frontdoor_warning_no_one_home
  alias: 1 hall frontdoor warning no one home
  trigger:
    platform: state
    entity_id: binary_sensor.1_hall_front_door_sensor
    from: 'off'
    to: 'on'
  condition:
    condition: state
    entity_id: binary_sensor.noen_hjemme_absolutt
    state: 'off'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Utgangsdøra er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
  - service: notify.mobile_app_helen_app
    data:
      message: Utgangsdøra er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
- id: 1_hall_frontdoor_warning_Google_assistant
  alias: 1 hall frontdoor warning Google assistant
  trigger:
  - entity_id: binary_sensor.1_hall_front_door_sensor
    for: 0:05:00
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  action:
  - data:
      variables:
        what: Utgangsdøra er åpen.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 1_hall_closet_light_on
  alias: 1 hall closet light on
  description: ''
  trigger:
  - device_id: be26537fffa74298b2f80d66942dac57
    domain: zha
    platform: device
    subtype: remote_button_short_press
    type: remote_button_short_press
  - entity_id: sensor.1_hall_closet_sensor_burglar
    from: '0'
    platform: state
    to: '8'
  action:
  - entity_id: light.1_hall_closet_light
    service: light.turn_on
- id: 1_hall_closet_light_off
  alias: 1 hall closet light off
  trigger:
  - entity_id: sensor.1_hall_closet_sensor_burglar
    for: 0:04:00
    platform: state
    to: '0'
  action:
  - timeout: '240'
    wait_template: ''
  - entity_id:
    - light.1_hall_closet_light
    service: homeassistant.turn_off
- id: 1_kitchen_refridgerator_door_alert
  alias: 1 Kitchen refridgerator door alert
  trigger:
  - entity_id: binary_sensor.1_kitchen_refridgerator_door
    for: 0:00:60
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  action:
  - data:
      variables:
        what: Kanskje lukke kjøleskapet?
    entity_id: script.1591765433504
    service: script.turn_on
- id: 1_kitchen_refridgerator_door_alert_2
  alias: 1 Kitchen refridgerator door alert 2
  trigger:
  - entity_id: binary_sensor.1_kitchen_refridgerator_door
    for: 0:00:90
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  action:
  - data:
      variables:
        what: Nå må du lukke kjøleskapet!
    data_template:
      volume_level: 0.6
    entity_id: script.1591765433504
    service: script.turn_on
- id: 1_livingroom_turn_down_Heat_pump_evening
  alias: 1 livingroom turn down Heat pump evening
  trigger:
    platform: time
    at: '23:59:00'
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.netatmo_outside_temperature
      above: '-9'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.turn_on
    data:
      entity_id: climate.1_livingroom_heatpump
  - service: climate.set_hvac_mode
    data:
      entity_id: climate.1_livingroom_heatpump
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_livingroom_heatpump
      temperature: 16
- id: 1_livingroom_Turn_up_Heat_pump_morning
  alias: 1 livingroom Turn up Heat pump morning
  trigger:
    platform: time
    at: 04:30:00
  condition:
    condition: state
    entity_id: binary_sensor.alle_bortreist
    state: 'off'
  action:
  - service: climate.turn_on
    data:
      entity_id: climate.1_livingroom_heatpump
  - service: climate.set_hvac_mode
    data:
      entity_id: climate.1_livingroom_heatpump
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_livingroom_heatpump
      temperature: 20
- id: 1_livingroom_terrace_door_warning_no_one_home
  alias: 1 livingroom terrace door warning no one home
  trigger:
    platform: state
    entity_id: binary_sensor.1_livingroom_terrace_door
    from: 'off'
    to: 'on'
  condition:
    condition: state
    entity_id: binary_sensor.noen_hjemme_absolutt
    state: 'off'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Terassedøra er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
  - service: notify.mobile_app_helen_app
    data:
      message: Terassedøra er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
- id: 1_livingroom_terrace_door_warning_mg
  alias: 1 livingroom terrace door warning mg
  trigger:
    platform: state
    entity_id: input_select.morten_status_dropdown
    from: hjemme
    to: Reist
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.noen_hjemme_absolutt
      state: 'off'
    - condition: state
      entity_id: binary_sensor.1_livingroom_terrace_door
      state: 'on'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Du Reiste ifra tomt hus med terassedøra åpen
      data:
        push:
          badge: 5
- id: 1_livingroom_terrace_door_warning_hg
  alias: 1 livingroom terrace door warning hg
  trigger:
    platform: state
    entity_id: input_select.helen_status_dropdown
    from: hjemme
    to: Reist
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.noen_hjemme_absolutt
      state: 'off'
    - condition: state
      entity_id: binary_sensor.1_livingroom_terrace_door
      state: 'on'
  action:
  - service: notify.mobile_app_helen_app
    data:
      message: Du Reiste ifra tomt hus med terassedøra åpen
      data:
        push:
          badge: 5
- id: 1_washingroom_turn_on_light_when_there_is_movement
  alias: 1 washingroom turn on light when there is movement
  trigger:
    platform: numeric_state
    entity_id: sensor.1_washingroom_sensor_burglar
    above: '0'
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.1_washingroom_light_switch
- id: 1_washingroom_turn_off_light_when_there_is_no_movement
  alias: 1 washingroom turn off light when there is no movement
  trigger:
    platform: numeric_state
    entity_id: sensor.1_washingroom_sensor_burglar
    below: '1'
    for:
      minutes: '2'
  action:
    service: homeassistant.turn_off
    entity_id:
    - switch.1_washingroom_light_switch
- id: 1_washingroom_turn_on_fan_when_there_is_high_humidity
  alias: 1 washingroom turn on fan when there is high humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.1_washingroom_sensor_relative_humidity
    above: '55'
    for:
      minutes: 5
  action:
  - service: homeassistant.turn_on
    entity_id:
    - switch.1_washingroom_fan_switch
- id: 1_washingroom_turn_on_fan_when_there_more_then_30_degres_in_the_livingroom
  alias: 1 washingroom turn on fan when there more then 30 degres in the livingroom
  trigger:
    platform: numeric_state
    entity_id: sensor.netatmo_1_Livingroom_temperature
    above: '30'
  action:
  - service: homeassistant.turn_on
    entity_id:
    - switch.1_washingroom_fan_switch
- id: 1_washingroom_turn_on_fan_when_there_more_then_30_degres_in_the_washingroom
  alias: 1 washingroom turn on fan when there more then 30 degres in the washingroom
  trigger:
    platform: numeric_state
    entity_id: sensor.1_washingroom_sensor_temperature
    above: '30'
  action:
  - service: homeassistant.turn_on
    entity_id:
    - switch.1_washingroom_fan_switch
- id: 1_washingroom_turn_off_fan_when_there_is_low_humidity
  alias: 1 washingroom turn off fan when there is low humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.1_washingroom_sensor_relative_humidity
    below: '55'
    for:
      minutes: 5
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.netatmo_1_Livingroom_temperature
      below: '25'
    - condition: numeric_state
      entity_id: sensor.1_washingroom_sensor_temperature
      below: '30'
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.1_washingroom_fan_switch
- id: 1_washingroom_turn_off_fan_when_there_less_then_30_degres_in_the_livingroom
  alias: 1 washingroom turn off fan when there less then 30 degres in the livingroom
  trigger:
    platform: numeric_state
    entity_id: sensor.netatmo_1_Livingroom_temperature
    below: '30'
    for:
      minutes: 5
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.1_washingroom_sensor_relative_humidity
      below: '55'
    - condition: numeric_state
      entity_id: sensor.1_washingroom_sensor_temperature
      below: '30'
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.1_washingroom_fan_switch
- id: 1_washingroom_turn_off_fan_when_there_less_then_30_degres_in_the_washingroom
  alias: 1 washingroom turn off fan when there less then 30 degres in the washingroom
  trigger:
    platform: numeric_state
    entity_id: sensor.1_washingroom_sensor_temperature
    below: '30'
    for:
      minutes: 5
  condition:
    condition: and
    conditions:
    - condition: numeric_state
      entity_id: sensor.1_washingroom_sensor_relative_humidity
      below: '55'
    - condition: numeric_state
      entity_id: sensor.netatmo_1_Livingroom_temperature
      below: '30'
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.1_washingroom_fan_switch
- id: 1_washingroom_turn_on_heatfan_morning_weekdays
  alias: 1 washingroom turn on heatfan morning weekdays
  trigger:
    platform: time
    at: 06:00:00
  condition:
    condition: and
    conditions:
    - condition: time
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
    - condition: state
      entity_id: binary_sensor.noen_voksne_hjemme
      state: 'on'
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.1_washingroom_heatfan
- id: 1_washingroom_turn_on_heatfan_morning_weekends
  alias: 1 washingroom turn on heatfan morning weekends
  trigger:
    platform: time
    at: 08:00:00
  condition:
    condition: and
    conditions:
    - condition: time
      weekday:
      - sat
      - sun
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
    - condition: state
      entity_id: binary_sensor.noen_voksne_hjemme
      state: 'on'
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.1_washingroom_heatfan
- id: 1_washingroom_turn_off_heatfan_all_evenings
  alias: 1 washingroom turn off heatfan all evenings
  trigger:
    platform: time
    at: '23:00:00'
  action:
    service: homeassistant.turn_off
    entity_id:
    - switch.1_washingroom_heatfan
- id: 1_washingroom_no_adults_home_hetafan_off
  alias: 1 washingroom no adults home hetafan off
  trigger:
    platform: state
    entity_id: binary_sensor.noen_voksne_hjemme
    from: 'on'
    to: 'off'
  condition:
    condition: time
    after: 06:01:00
    before: '22:59:00'
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.1_washingroom_heatfan
- id: 1_wasingroom_adult_home_heatfan_on
  alias: 1 wasingroom adult home heatfan on
  trigger:
    platform: state
    entity_id: binary_sensor.noen_voksne_hjemme
    from: 'off'
    to: 'on'
  condition:
    condition: time
    after: 06:01:00
    before: '22:59:00'
  action:
  - service: homeassistant.turn_on
    entity_id:
    - switch.1_washingroom_heatfan
- id: 1_washingroom_door_warning_no_one_home
  alias: 1 washingroom door warning no one home
  trigger:
    platform: state
    entity_id: binary_sensor.1_washingroom_door_sensor
    from: 'off'
    to: 'on'
  condition:
    condition: state
    entity_id: binary_sensor.noen_hjemme_absolutt
    state: 'off'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Vaskeromsdøra er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
  - service: notify.mobile_app_helen_app
    data:
      message: Vaskeromsdøra er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
- id: 1_washingroom_door_warning_mg
  alias: 1 washingroom door warning mg
  trigger:
    platform: state
    entity_id: input_select.morten_status_dropdown
    from: hjemme
    to: Reist
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.noen_hjemme_absolutt
      state: 'off'
    - condition: state
      entity_id: binary_sensor.1_washingroom_door_sensor
      state: 'on'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Du Reiste ifra tomt hus med vaskeromsdøra åpen
      data:
        push:
          badge: 5
- id: 1_washingroom_door_warning_hg
  alias: 1 washingroom door warning hg
  trigger:
    platform: state
    entity_id: input_select.helen_status_dropdown
    from: hjemme
    to: Reist
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.noen_hjemme_absolutt
      state: 'off'
    - condition: state
      entity_id: binary_sensor.1_washingroom_door_sensor
      state: 'on'
  action:
  - service: notify.mobile_app_helen_app
    data:
      message: Du Reiste ifra tomt hus med vaskeromsdøra åpen
      data:
        push:
          badge: 5
- id: 2_bathroom_turn_on_light_when_there_is_movement
  alias: 2 bathroom turn on light when there is movement
  trigger:
    platform: numeric_state
    entity_id: sensor.2_bathroom_sensor_burglar
    above: '0'
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.2_bathroom_light_switch
- id: 2_bathroom_turn_on_fan_when_there_is_movement
  alias: 2 bathroom turn on fan when there is movement
  trigger:
    platform: numeric_state
    entity_id: sensor.2_bathroom_sensor_burglar
    above: '0'
  condition:
    condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.2_bathroom_fan_switch
- id: 2_bathroom_turn_off_light_when_there_is_no_movement
  alias: 2 bathroom turn off light when there is no movement
  trigger:
    platform: numeric_state
    entity_id: sensor.2_bathroom_sensor_burglar
    below: '1'
    for:
      minutes: '10'
  action:
    service: homeassistant.turn_off
    entity_id:
    - switch.2_bathroom_light_switch
- id: 2_bathroom_turn_on_fan_when_there_is_high_humidity
  alias: 2 bathroom turn on fan when there is high humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.2_bathroom_sensor_relative_humidity
    above: '55'
    below: '100'
    for:
      minutes: 5
  action:
  - service: homeassistant.turn_on
    entity_id:
    - switch.2_bathroom_fan_switch
- id: 2_bathroom_turn_off_fan_when_there_is_low_humidity
  alias: 2 bathroom turn off fan when there is low humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.2_bathroom_sensor_relative_humidity
    above: '0'
    below: '54'
    for:
      minutes: 10
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.2_bathroom_fan_switch
- id: 2_bathroom_turn_off_fan_after_5_minutes_if_there_is_low_humidity
  alias: 2 bathroom turn off fan after 5 minutes if there is low humidity
  trigger:
    platform: numeric_state
    entity_id: sensor.2_bathroom_sensor_burglar
    below: '1'
    for:
      minutes: '10'
  condition:
    condition: numeric_state
    entity_id: sensor.2_bathroom_sensor_relative_humidity
    above: '0'
    below: '54'
  action:
  - service: homeassistant.turn_off
    entity_id:
    - switch.2_bathroom_fan_switch
- id: 2_bathroom_window_is_open_and_it_is_raining
  alias: 2 bathroom window is open and it is raining
  trigger:
  - above: '0'
    entity_id: sensor.netatmo_rain_sensor_rain
    platform: numeric_state
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.2_bathroom_roof_window
      state: 'on'
    - condition: state
      entity_id: input_select.time_of_day_dropdown
      state: Dagtid
  action:
  - data:
      variables:
        what: Det regner og takvindu på badet oppe er åpent.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 2_bathroom_turn_down_thermostat_evening
  alias: 2 bathroom turn down thermostat evening
  trigger:
    platform: time
    at: '23:00:00'
  condition:
    condition: state
    entity_id: binary_sensor.alle_bortreist
    state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bathroom_thermostat_mode
      temperature: 10
      hvac_mode: heat
- id: 2_bathroom_turn_up_thermostat_morning
  alias: 2 bathroom turn up thermostat morning
  trigger:
    platform: time
    at: 05:30:00
  condition:
    condition: state
    entity_id: binary_sensor.alle_bortreist
    state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bathroom_thermostat_mode
      temperature: 20
      hvac_mode: heat
- id: 2_bedroom_e_set_temp_22_morning_weekdays
  alias: 2 bedroom e set temp 22 morning weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_e_morning_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_e_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 2_bedroom_e_set_temp_18_evening_weekdays
  alias: 2 bedroom e set temp 18 evening weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_e_evening_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_e_thermostat
      hvac_mode: heat
      temperature: 18
    service: climate.set_temperature
- id: 2_bedroom_e_set_temp_22_morning_weekend
  alias: 2 bedroom e set temp 22 morning weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_e_morning_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_e_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 2_bedroom_e_set_temp_18_evening_weekend
  alias: 2 bedroom e set temp 18 evening weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_e_evening_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_e_thermostat
      hvac_mode: heat
      temperature: 18
    service: climate.set_temperature
- id: 2_bedroom_e_set_temp_18_during_school
  alias: 2 bedroom e set temp 18 during school
  trigger:
    platform: time
    at: 08:00:00
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_e_thermostat
      temperature: 18
      hvac_mode: heat
- id: 2_bedroom_e_set_temp_22_after_school
  alias: 2 bedroom e set temp 22 after school
  trigger:
  - at: '14:30:00'
    platform: time
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_e_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 2_bedroom_e_set_temp_22_after_school_wed
  alias: 2 bedroom e set temp 22 after school wed
  trigger:
    platform: time
    at: '11:30:00'
  condition:
    condition: and
    conditions:
    - condition: time
      weekday:
      - wed
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_e_thermostat
      temperature: 22
      hvac_mode: heat
- id: 2_bedroom_e_alert_above_25_degrees
  alias: 2 bedroom e alert temperature above 25
  trigger:
  - above: '25'
    entity_id: sensor.2_bedroom_e_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det over 25 grader på rommet til Emil
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 2_bedroom_e_alert_above_29_degrees
  alias: 2 bedroom e alert temperature above 29
  trigger:
    platform: numeric_state
    entity_id: sensor.2_bedroom_e_temperature
    above: '29'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Nå er det over 29 grader på rommet til Emil
- id: 2_bedroom_hm_turn_on_light_morning_weekdays
  alias: 2 bedroom hm turn on light morning weekdays
  trigger:
    platform: time
    at: 06:15:00
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.2_bedroom_hm_switch
- id: 2_bedroom_hm_turn_off_light_morning_weekdays
  alias: 2 bedroom hm turn off light morning weekdays
  trigger:
    platform: time
    at: 08:30:00
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
    service: homeassistant.turn_off
    entity_id:
    - switch.2_bedroom_hm_switch
- id: 2_bedroom_hm_turn_on_light_evening
  alias: 2 bedroom hm turn on light evening
  trigger:
    platform: time
    at: '22:00:00'
  action:
    service: homeassistant.turn_on
    entity_id:
    - switch.2_bedroom_hm_switch
- id: 2_bedroom_hm_turn_off_light_evening
  alias: 2 bedroom hm turn off light evening
  trigger:
    platform: time
    at: '23:59:00'
  action:
    service: homeassistant.turn_off
    entity_id:
    - switch.2_bedroom_hm_switch
- id: 2_bedroom_hm_window_is_open_and_it_is_raining
  alias: 2 bedroom hm window is open and it is raining
  trigger:
  - above: '0'
    entity_id: sensor.netatmo_rain_sensor_rain
    platform: numeric_state
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.2_bedroom_hm_roof_window
      state: 'on'
    - condition: state
      entity_id: input_select.time_of_day_dropdown
      state: Dagtid
  action:
  - data:
      variables:
        what: Det regner og takvindu på soverommet er åpent.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 2_bedroom_o_set_temp_16_evening_weekdays
  alias: 2 bedroom o set temp 16 evening weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_o_evening_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_o_thermostat
      hvac_mode: heat
      temperature: 16
    service: climate.set_temperature
- id: 2_bedroom_o_set_temp_20_morning_weekend
  alias: 2 bedroom o set temp 20 morning weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_o_morning_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_o_thermostat
      hvac_mode: heat
      temperature: 20
    service: climate.set_temperature
- id: 2_bedroom_o_set_temp_16_evening_weekend
  alias: 2 bedroom o set temp 16 evening weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_o_evening_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_o_thermostat
      hvac_mode: heat
      temperature: 16
    service: climate.set_temperature
- id: 2_bedroom_o_set_temp_20_after_school
  alias: 2 bedroom o set temp 20 after school
  trigger:
    platform: time
    at: '14:00:00'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_o_thermostat
      temperature: 20
      hvac_mode: heat
- id: 2_bedroom_o_set_temp_22_after_school_wed
  alias: 2 bedroom o set temp 20 after school wed
  trigger:
    platform: time
    at: '14:00:00'
  condition:
    condition: and
    conditions:
    - condition: time
      weekday:
      - wed
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_o_thermostat
      temperature: 20
      hvac_mode: heat
- id: 2_bedroom_o_alert_above_25_degrees
  alias: 2 bedroom o alert temperature above 25
  trigger:
  - above: '25'
    entity_id: sensor.2_bedroom_o_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det over 25 grader på rommet til Ole
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 2_bedroom_t_set_temp_22_morning_weekdays
  alias: 2 bedroom t set temp 22 morning weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_t_morning_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_t_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 2_bedroom_t_set_temp_16_evening_weekdays
  alias: 2 bedroom t set temp 16 evening weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_t_evening_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_t_thermostat
      hvac_mode: heat
      temperature: 16
    service: climate.set_temperature
- id: 2_bedroom_t_set_temp_22_morning_weekend
  alias: 2 bedroom t set temp 22 morning weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_t_morning_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_t_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: 2_bedroom_t_set_temp_16_evening_weekend
  alias: 2 bedroom t set temp 16 evening weekend
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.bedroom_t_evening_non_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_t_thermostat
      hvac_mode: heat
      temperature: 16
    service: climate.set_temperature
- id: 2_bedroom_t_set_temp_16_during_school
  alias: 2 bedroom t set temp 16 during school
  trigger:
    platform: time
    at: 08:00:00
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_t_thermostat
      temperature: 16
      hvac_mode: heat
- id: 2_bedroom_t_set_temp_22_after_school
  alias: 2 bedroom t set temp 22 after school
  trigger:
    platform: time
    at: '14:00:00'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_t_thermostat
      temperature: 22
      hvac_mode: heat
- id: 2_bedroom_t_set_temp_22_after_school_wed
  alias: 2 bedroom t set temp 22 after school wed
  trigger:
    platform: time
    at: '11:30:00'
  condition:
    condition: and
    conditions:
    - condition: time
      weekday:
      - wed
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_t_thermostat
      temperature: 22
      hvac_mode: heat
- id: 2_bedroom_t_alert_above_25_degrees
  alias: 2 bedroom t alert temperature above 25
  trigger:
  - above: '25'
    entity_id: sensor.2_bedroom_t_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det over 25 grader på rommet til Tobias
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 2_livingroom_window_is_open_and_it_is_raining
  alias: 2 livingroom window is open and it is raining
  trigger:
  - above: '0'
    entity_id: sensor.netatmo_rain_sensor_rain
    platform: numeric_state
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.2_livingroom_roof_window
      state: 'on'
    - condition: state
      entity_id: input_select.time_of_day_dropdown
      state: Dagtid
  action:
  - data:
      variables:
        what: Det regner og takvindu i stua oppe er åpent.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: 1_hall_front_door_warning_night
  alias: 1 hall front door warning night
  trigger:
    platform: state
    entity_id: binary_sensor.1_hall_front_door_sensor
    from: 'off'
    to: 'on'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.noen_voksne_hjemme
      state: 'on'
    - condition: time
      after: 00:00:00
      before: 05:00:00
    - condition: state
      entity_id: input_select.alarm_status
      state: På
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Utgangsdøra er åpnet og det er natt
      data:
        push:
          badge: 5
  - service: notify.mobile_app_helen_app
    data:
      message: Utgangsdøra er åpnet og det er natt
      data:
        push:
          badge: 5
  - service: xiaomi_aqara.play_ringtone
    data:
      gw_mac: 34:CE:00:8C:0F:7A
      ringtone_id: 7
      ringtone_vol: 100
  - delay: 00:00:15
  - service: xiaomi_aqara.play_ringtone
    data:
      gw_mac: 34:CE:00:8C:0F:7A
      ringtone_id: 7
      ringtone_vol: 100
- id: 1_livingroom_terrace_door_warning_night
  alias: 1 livingroom terrace door warning night
  trigger:
    platform: state
    entity_id: binary_sensor.1_livingroom_terrace_door
    from: 'off'
    to: 'on'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.noen_voksne_hjemme
      state: 'on'
    - condition: time
      after: 00:00:00
      before: 05:00:00
    - condition: state
      entity_id: input_select.alarm_status
      state: På
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Terassedøra er åpnet og det er natt
      data:
        push:
          badge: 5
  - service: notify.mobile_app_helen_app
    data:
      message: Terassedøra er åpnet og det er natt
      data:
        push:
          badge: 5
  - service: xiaomi_aqara.play_ringtone
    data:
      gw_mac: 34:CE:00:8C:0F:7A
      ringtone_id: 7
      ringtone_vol: 100
  - delay: 00:00:15
  - service: xiaomi_aqara.play_ringtone
    data:
      gw_mac: 34:CE:00:8C:0F:7A
      ringtone_id: 7
      ringtone_vol: 100
- id: 1_washingroom_door_warning_night
  alias: 1 washingroom door warning night
  trigger:
    platform: state
    entity_id: binary_sensor.1_washingroom_door_sensor
    from: 'off'
    to: 'on'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.noen_voksne_hjemme
      state: 'on'
    - condition: time
      after: 00:00:00
      before: 05:00:00
    - condition: state
      entity_id: input_select.alarm_status
      state: På
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Vaskeromsdøra er åpnet og det er natt
      data:
        push:
          badge: 5
  - service: notify.mobile_app_helen_app
    data:
      message: Vaskeromsdøra er åpnet og det er natt
      data:
        push:
          badge: 5
  - service: xiaomi_aqara.play_ringtone
    data:
      gw_mac: 34:CE:00:8C:0F:7A
      ringtone_id: 7
      ringtone_vol: 100
  - delay: 00:00:15
  - service: xiaomi_aqara.play_ringtone
    data:
      gw_mac: 34:CE:00:8C:0F:7A
      ringtone_id: 7
      ringtone_vol: 100
- id: set_alarm_off_morning
  alias: set alarm off morning
  trigger:
  - platform: time
    at: 05:00:00
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.alarm_status
      option: Av
- id: brew_bottle_temperature_to_high
  alias: brew bottle temperature to high
  trigger:
  - above: '21'
    entity_id: sensor.brew_bottles_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det for varmt for ølflaskene.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: brew_bottle_temperature_to_low
  alias: brew bottle temperature to low
  trigger:
  - below: '17'
    entity_id: sensor.brew_bottles_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det for kaldt for ølflaskene.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: brew_fermentation_temperature_to_high
  alias: brew fermentation temperature to high
  trigger:
  - above: '22'
    entity_id: sensor.brew_fermentation_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det for varmt for gjæringskaret.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
  - data:
      message: Nå er det for varmt for gjæringskaret
    service: notify.mobile_app_morten_app
- id: brew_fermentation_temperature_to_low
  alias: brew fermentation temperature to low
  trigger:
  - below: '18'
    entity_id: sensor.brew_fermentation_temperature
    platform: numeric_state
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er det for kaldt for gjæringskaret.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
  - data:
      message: Nå er det for kaldt for gjæringskaret
    service: notify.mobile_app_morten_app
- id: no_one_home_turn_down_heating
  alias: no one home turn down heating
  trigger:
    platform: state
    entity_id: binary_sensor.alle_bortreist
    from: 'off'
    to: 'on'
  action:
  - service: climate.turn_on
    data:
      entity_id: climate.1_livingroom_heatpump
  - service: climate.set_hvac_mode
    data:
      entity_id: climate.1_livingroom_heatpump
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_livingroom_heatpump
      temperature: 10
  - service: climate.set_temperature
    data:
      entity_id: climate.1_hall_thermostat_heating
      temperature: 10
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bathroom_thermostat_heating
      temperature: 10
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_t_thermostat
      temperature: 16
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bedroom_k_thermostat
      temperature: 16
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_e_thermostat
      temperature: 16
      hvac_mode: heat
- id: someone_home_after_bortreist_turn_up_heating
  alias: someone home after bortreist turn up heating
  trigger:
    platform: state
    entity_id: binary_sensor.alle_bortreist
    from: 'on'
    to: 'off'
  action:
  - service: climate.turn_on
    data:
      entity_id: climate.1_livingroom_heatpump
  - service: climate.set_hvac_mode
    data:
      entity_id: climate.1_livingroom_heatpump
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_livingroom_heatpump
      temperature: 20
  - service: climate.set_temperature
    data:
      entity_id: climate.1_hall_thermostat_heating
      temperature: 20
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bathroom_thermostat_heating
      temperature: 20
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.2_bedroom_t_thermostat
      temperature: 22
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bedroom_k_thermostat
      temperature: 22
      hvac_mode: heat
  - service: climate.set_temperature
    data:
      entity_id: climate.1_bedroom_e_thermostat
      temperature: 22
      hvac_mode: heat
- id: 2_livingroom_SmokeAlert_smoke
  alias: 2 livingroom SmokeAlert smoke
  trigger:
  - entity_id: sensor.2_livingroom_smoke_sensor_smoke_2
    platform: state
    to: '255'
  action:
  - entity_id: scene.normal
    service: scene.turn_on
  - data_template:
      volume_level: 1
    entity_id: media_player.1_livingroom_sonos
    service: media_player.volume_set
  - data:
      message: 'Brannalarmen oppe er utløst for røyk '
    entity_id: media_player.1_livingroom_sonos
    service: tts.google_translate_say
  - data:
      message: 'Brannalarmen oppe er utløst for røyk '
    entity_id: media_player.2_bedroom_t_sonos
    service: tts.google_translate_say
- id: 1_hall_SmokeAlert_smoke
  alias: 1 hall SmokeAlert smoke
  trigger:
  - entity_id: sensor.1_hall_smoke_sensor_smoke_2
    platform: state
    to: '255'
  action:
  - entity_id: scene.normal
    service: scene.turn_on
  - data_template:
      entity_id: media_player.1_livingroom_sonos
      volume_level: 1
    entity_id: media_player.1_livingroom_sonos
    service: media_player.volume_set
  - data:
      message: 'Brannalarmen, nede er utløst for røyk '
    entity_id: media_player.1_livingroom_sonos
    service: tts.google_translate_say
  - data:
      message: 'Brannalarmen nede er utløst for røyk '
    entity_id: media_player.2_bedroom_t_sonos
    service: tts.google_translate_say
- id: 2_livingroom_SmokeAlert_heat
  alias: 2 livingroom SmokeAlert heat
  trigger:
  - entity_id: sensor.2_livingroom_smoke_sensor_heat_2
    platform: state
    to: '255'
  action:
  - entity_id: scene.normal
    service: scene.turn_on
  - data_template:
      entity_id: media_player.1_livingroom_sonos
      volume_level: 1
    entity_id: media_player.1_livingroom_sonos
    service: media_player.volume_set
  - data:
      message: 'Brannalarmen oppe er utløst for varme '
    entity_id: media_player.1_livingroom_sonos
    service: tts.google_translate_say
  - data:
      message: 'Brannalarmen oppe er utløst for varme '
    entity_id: media_player.2_bedroom_t_sonos
    service: tts.google_translate_say
- id: 1_hall_SmokeAlert_heat
  alias: 1 hall SmokeAlert heat
  trigger:
  - entity_id: sensor.1_hall_smoke_sensor_heat_2
    platform: state
    to: '255'
  action:
  - entity_id: scene.normal
    service: scene.turn_on
  - data_template:
      entity_id: media_player.1_livingroom_sonos
      volume_level: 1
    entity_id: media_player.1_livingroom_sonos
    service: media_player.volume_set
  - data:
      message: 'Brannalarmen nede er utløst for varme '
    entity_id: media_player.1_livingroom_sonos
    service: tts.google_translate_say
  - data:
      message: 'Brannalarmen nede er utløst for varme '
    entity_id: media_player.2_bedroom_t_sonos
    service: tts.google_translate_say
- id: Garage_nissan_door_is_open
  alias: Garage nissan door is open
  trigger:
  - entity_id: cover.garage_door_nissan
    for: 0:20:00
    from: closed
    platform: state
    to: open
  action:
  - data:
      data:
        push:
          badge: 5
      message: Garasjen til nissan er oppe, jeg lukker den
    service: notify.mobile_app_morten_app
  - data:
      data:
        push:
          badge: 5
      message: Garasjen til nissan er oppe, jeg lukker den
    service: notify.mobile_app_helen_app
  - data:
      variables:
        what: Garasjeporten til nissan er åpen, jeg lukker den.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_off
  - delay: 0:00:02
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_on
  - delay: 0:00:20
  - condition: state
    entity_id: cover.garage_door_nissan
    state: open
  - entity_id: cover.garage_door_nissan
    service: cover.close_cover
- id: Garage_tesla_door_is_open
  alias: Garage tesla door is open
  trigger:
  - entity_id: cover.garage_door_tesla
    for: 0:20:00
    from: closed
    platform: state
    to: open
  action:
  - data:
      data:
        push:
          badge: 5
      message: Garasjen til tesla er oppe, jeg lukker den
    service: notify.mobile_app_morten_app
  - data:
      variables:
        what: Garasjeporten til tesla er åpen, jeg lukker den
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_off
  - delay: 0:00:02
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_on
  - delay: 0:00:20
  - condition: state
    entity_id: cover.garage_door_tesla
    state: open
  - data: {}
    entity_id: cover.garage_door_tesla
    service: cover.close_cover
- id: Garage_start_gate_timer_tesla
  alias: 'Garage tesla start gate timer '
  trigger:
  - entity_id: cover.garage_door_tesla
    for: 0:00:02
    platform: state
    to: closed
  action:
  - entity_id: timer.port_tesla
    service: timer.start
- id: Garage_stop_gate_timer_tesla
  alias: 'Garage tesla stop gate timer '
  trigger:
  - entity_id: cover.garage_door_tesla
    for: 0:00:05
    platform: state
    to: closed
  action:
  - entity_id: timer.port_tesla
    service: timer.cancel
- id: Garage_tesla_door_did_not_close
  alias: Garage tesla door did not close
  trigger:
  - event_data:
      entity_id: timer.port_tesla
    event_type: timer.finished
    platform: event
  action:
  - data:
      data:
        push:
          badge: 5
      message: Garasjen til tesla gikk opp igjen
    service: notify.mobile_app_morten_app
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Garasjeporten til tesla gikk opp igjen.
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: Garage_start_gate_timer_nissan
  alias: 'Garage nissan start gate timer '
  trigger:
  - entity_id: cover.garage_door_nissan
    for: 0:00:02
    platform: state
    to: closed
  action:
  - entity_id: timer.port_nissan
    service: timer.start
- id: Garage_stop_gate_timer_nissan
  alias: 'Garage nissan stop gate timer '
  trigger:
  - entity_id: cover.garage_door_nissan
    for: 0:00:05
    platform: state
    to: closed
  action:
  - entity_id: timer.port_nissan
    service: timer.cancel
- id: Garage_nissan_door_did_not_close
  alias: Garage nissan door did not close
  trigger:
  - event_data:
      entity_id: timer.port_nissan
    event_type: timer.finished
    platform: event
  action:
  - data:
      data:
        push:
          badge: 5
      message: Garasjen til nissan gikk opp igjen
    service: notify.mobile_app_morten_app
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Garasjeporten til nissan gikk opp igjen.
    entity_id: script.1591765433504
    service: script.turn_on
- id: Garage_lights_on_nissan
  alias: 'Garage nissan lights on '
  trigger:
  - entity_id: cover.garage_door_nissan
    from: closed
    platform: state
    to: open
  action:
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_on
- id: Garage_lights_on_tesla
  alias: 'Garage tesla lights on '
  trigger:
  - entity_id: cover.garage_door_tesla
    from: closed
    platform: state
    to: open
  action:
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_on
- id: Garage_lights_off_nissan
  alias: 'Garage nissan lights off '
  trigger:
  - entity_id: cover.garage_door_nissan
    for: 0:01:00
    from: open
    platform: state
    to: closed
  condition:
  - condition: state
    entity_id: cover.garage_door_tesla
    state: closed
  action:
  - condition: state
    entity_id: cover.garage_door_nissan
    state: closed
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_off
- id: Garage_lights_off_tesla
  alias: 'Garage tesla lights off '
  trigger:
  - entity_id: cover.garage_door_tesla
    for: 0:01:00
    from: open
    platform: state
    to: closed
  condition:
  - condition: state
    entity_id: cover.garage_door_nissan
    state: closed
  action:
  - condition: state
    entity_id: cover.garage_door_tesla
    state: closed
  - entity_id:
    - switch.garage_lights_switch
    service: homeassistant.turn_off
- id: Garage_button_control_door_nissan
  alias: 'Garage nissan button control door '
  trigger:
  - device_id: 9b70ab0f31e44bc7943a79cc5692a173
    domain: zha
    platform: device
    subtype: remote_button_short_press
    type: remote_button_short_press
  action:
  - entity_id: cover.garage_door_nissan
    service: cover.toggle
- id: Garage_button_control_door_tesla
  alias: 'Garage tesla button control door '
  trigger:
  - device_id: 9b70ab0f31e44bc7943a79cc5692a173
    domain: zha
    platform: device
    subtype: remote_button_double_press
    type: remote_button_double_press
  action:
  - entity_id: cover.garage_door_tesla
    service: cover.toggle
- id: garage_door_warning_no_one_home
  alias: Garage door warning no one home
  trigger:
    platform: state
    entity_id: binary_sensor.garage_door_sensor
    from: 'off'
    to: 'on'
  condition:
    condition: state
    entity_id: binary_sensor.noen_hjemme_absolutt
    state: 'off'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Døra på garasjen er åpnet og ingen er hjemme
  - service: notify.mobile_app_helen_app
    data:
      message: Døra på garasjen er åpnet og ingen er hjemme
- id: garage_attic_door_warning_no_one_home
  alias: Garage attic door warning no one home
  trigger:
    platform: state
    entity_id: binary_sensor.garage_attic_door_sensor
    from: 'off'
    to: 'on'
  condition:
    condition: state
    entity_id: binary_sensor.noen_hjemme_absolutt
    state: 'off'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Loftsdøra på garasjen er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
  - service: notify.mobile_app_helen_app
    data:
      message: Loftsdøra på garasjen er åpnet og ingen er hjemme
      data:
        push:
          badge: 5
- id: Garage_door_light
  alias: Garage door light
  trigger:
    platform: state
    entity_id: binary_sensor.garage_door_sensor
    from: 'off'
    to: 'on'
  action:
  - service: homeassistant.turn_on
    entity_id:
    - switch.garage_lights_switch
  - delay: 00:15:00
  - service: homeassistant.turn_off
    entity_id:
    - switch.garage_lights_switch
- id: Garage_attic_door_light
  alias: Garage attic door light
  trigger:
  - entity_id: binary_sensor.garage_attic_door_sensor
    from: 'off'
    platform: state
    to: 'on'
  action:
  - entity_id: light.garage_attic_lights
    service: light.turn_on
  - delay: 00:30:00
  - entity_id: light.garage_attic_lights
    service: light.turn_off
- id: garage_lights_turn_on_in_the_evening
  alias: Garage spotlights turn on in the evening
  trigger:
  - event: sunset
    offset: -01:00:00
    platform: sun
  action:
  - entity_id: light.garage_spotlights
    service: light.turn_on
- id: garage_lights_turn_off_in_the_morning
  alias: Garage spotlights turn off in the morning
  trigger:
  - event: sunrise
    offset: +01:00:00
    platform: sun
  action:
  - entity_id: light.garage_spotlights
    service: light.turn_off
- id: Garage_tesla_snapshot
  alias: Garage tesla snapshot
  trigger:
  - entity_id: cover.garage_door_tesla
    for: 0:01:00
    from: closed
    platform: state
    to: open
  action:
  - data:
      entity_id: camera.garasje
      filename: /config/snapshot/garasje_tesla_{{ now().strftime("%Y%m%d-%H%M%S")
        }}.jpg
    service: camera.snapshot
- id: Garage_nissan_snapshot
  alias: Garage nissan snapshot
  trigger:
  - entity_id: cover.garage_door_nissan
    for: 0:01:00
    from: closed
    platform: state
    to: open
  action:
  - data:
      entity_id: camera.garasje
      filename: /config/snapshot/garasje_nissan_{{ now().strftime("%Y%m%d-%H%M%S")
        }}.jpg
    service: camera.snapshot
- id: garage_stream
  alias: Garasje stream
  trigger:
  - entity_id: cover.garage_door_nissan
    from: closed
    platform: state
    to: open
  action:
  - data:
      entity_id: camera.garasje
      media_player: media_player.1_livingroom_chromecast
    service: camera.play_stream
- id: Garden_Frank_is_out_mowing
  alias: Garden Henry is out mowing
  trigger:
  - entity_id: binary_sensor.garden_henry
    for: 0:00:10
    from: 'on'
    platform: state
    to: 'off'
  action:
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er Henry utepå tur
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: Garden_Frank_is_stuck
  alias: Garden Henry is stuck
  trigger:
  - entity_id: binary_sensor.garden_henry
    for: 0:105:00
    from: 'on'
    platform: state
    to: 'off'
  action:
  - data:
      data:
        push:
          badge: 5
      message: Henry sitter nok fast
    service: notify.mobile_app_morten_app
  - condition: state
    entity_id: input_select.time_of_day_dropdown
    state: Dagtid
  - data:
      variables:
        what: Nå er har nok Henry kjørt seg fast
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: Garden_Frank_is_home_again
  alias: Garden Henry is home again
  trigger:
  - entity_id: binary_sensor.garden_henry
    for: 00:00:10
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_select.time_of_day_dropdown
      state: Dagtid
  action:
  - data:
      variables:
        what: Nå er Henry hjemme igjen
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: Chromecast_start_tv_off
  alias: 1 livingroom Chromecast start TV off
  trigger:
  - entity_id: media_player.1_livingroom_chromecast
    platform: state
    to: playing
  condition:
  - condition: state
    entity_id: media_player.1_livingroom_tv
    state: 'off'
  action:
  - entity_id: media_player.1_livingroom_tv
    service: media_player.turn_on
  - delay: 00:00:10
  - data:
      entity_id: media_player.1_livingroom_tv
      source: Chromecast
    service: media_player.select_source
  - data:
      entity_id: media_player.1_livingroom_soundbar
      source: optical
    service: media_player.select_source
- id: Chromecast_start_tv_on
  alias: 1 livingroom Chromecast start TV on
  trigger:
  - entity_id: media_player.1_livingroom_chromecast
    platform: state
    to: playing
  condition:
  - condition: state
    entity_id: media_player.1_livingroom_tv
    state: 'on'
  action:
  - data:
      entity_id: media_player.1_livingroom_tv
      source: Chromecast
    service: media_player.select_source
  - data:
      entity_id: media_player.1_livingroom_soundbar
      source: optical
    service: media_player.select_source
- id: TV_on_set_source_soundbar
  alias: 1 livingroom TV on set source soundbar
  trigger:
  - entity_id: media_player.1_livingroom_tv
    platform: state
    to: 'on'
  action:
  - data:
      entity_id: media_player.1_livingroom_soundbar
      source: optical
    service: media_player.select_source
- id: Boolean_on_all_automations
  alias: Boolean on all automations
  trigger:
  - platform: state
    entity_id: input_boolean.on_all_automations
    to: 'on'
  action:
  - service: automation.turn_on
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.on_all_automations
- id: set_time_of_day_to_dagtid
  alias: set time of day to Dagtid workday
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.morning.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: state
    entity_id: binary_sensor.workday_today
    state: 'on'
  action:
  - data:
      entity_id: input_select.time_of_day_dropdown
      option: Dagtid
    service: input_select.select_option
- id: set_time_of_day_to_Natt
  alias: set time of day to Natt before workday
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.night.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: state
    entity_id: binary_sensor.workday_tomorrow
    state: 'on'
  action:
  - data:
      entity_id: input_select.time_of_day_dropdown
      option: Natt
    entity_id: input_select.time_of_day_dropdown
    service: input_select.select_option
- id: update_mqtt
  alias: Update MQTT
  description: ''
  trigger:
  - event: start
    platform: homeassistant
  action:
  - data:
      payload: ''
      topic: cmnd/garage_spotlights/Power
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/garage_attic_lights/Power
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/2_bedroom_e_heater/Power
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/2_bedroom_o_heater/Power
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/1_bedroom_k_heater/Power
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/2_bedroom_t_heater/Power
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/2_bedroom_hm_heater/Power
    service: mqtt.publish
  - data:
      payload: ''
      topic: cmnd/1_kitchen_sideboard/Power
    service: mqtt.publish
- id: All_Mark_as_hjemme
  alias: All Mark as hjemme
  trigger:
  - platform: state
    entity_id: input_boolean.all_home
    to: 'on'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Hjemme
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Hjemme
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Hjemme
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Hjemme
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Hjemme
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.all_home
- id: All_mark_as_borte
  alias: All mark as borte
  trigger:
  - platform: state
    entity_id: input_boolean.all_away
    to: 'on'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Borte
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Borte
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Borte
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Borte
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Borte
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.all_away
- id: Morten_mark_as_Akkurat_kommet_hjem
  alias: Morten mark as Kommet
  trigger:
  - platform: state
    entity_id: binary_sensor.morten_presence
    from: 'off'
    to: 'on'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Kommet
- id: Morten_mark_as_Hjemme
  alias: Morten mark as Hjemme
  trigger:
  - entity_id: input_select.morten_status_dropdown
    for: 0:05:00
    platform: state
    to: Kommet
  - entity_id: input_select.morten_status_dropdown
    from: Reist
    platform: state
    to: Kommet
  action:
  - data:
      entity_id: input_select.morten_status_dropdown
      option: Hjemme
    service: input_select.select_option
- id: Morten_mark_as_Akkurat_reist
  alias: Morten mark as Reist
  trigger:
  - entity_id: binary_sensor.morten_presence
    from: 'on'
    platform: state
    to: 'off'
  action:
  - data:
      entity_id: input_select.morten_status_dropdown
      option: Reist
    service: input_select.select_option
- id: Morten_mark_as_Borte
  alias: Morten mark as Borte
  trigger:
  - platform: state
    entity_id: input_select.morten_status_dropdown
    to: Reist
    for:
      minutes: 5
  - platform: state
    entity_id: device_tracker.morten_app
    from: Jobb
    to: not_home
  - platform: state
    entity_id: device_tracker.morten_app
    from: Tine
    to: not_home
  - platform: state
    entity_id: device_tracker.morten_app
    from: Jessheim VGS
    to: not_home
  - platform: state
    entity_id: device_tracker.morten_app
    from: Gystadmarka Ungdomsskole
    to: not_home
  - platform: state
    entity_id: device_tracker.morten_app
    from: Skateparken
    to: not_home
  - platform: state
    entity_id: device_tracker.morten_app
    from: Sentrum
    to: not_home
  - platform: state
    entity_id: device_tracker.morten_app
    from: Torun
    to: not_home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Borte
- id: Morten_mark_as_Jobb
  alias: Morten mark as Jobb
  trigger:
  - platform: state
    entity_id: device_tracker.morten_app
    to: Jobb
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Jobb
- id: Morten_mark_as_Tine
  alias: Morten mark as Tine
  trigger:
  - platform: state
    entity_id: device_tracker.morten_app
    to: Tine
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Tine
- id: Morten_mark_as_sentrum
  alias: Morten mark as sentrum
  trigger:
  - platform: state
    entity_id: device_tracker.morten_app
    to: Sentrum
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Sentrum
- id: Morten_mark_as_Torun
  alias: Morten mark as Torun
  trigger:
  - platform: state
    entity_id: device_tracker.morten_app
    to: Torun
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Torun
- id: Morten_mark_as_Jessheim VGS
  alias: Morten mark as Jessheim VGS
  trigger:
  - platform: state
    entity_id: device_tracker.morten_app
    to: Jessheim VGS
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Jessheim VGS
- id: Morten_mark_as_Skateparken
  alias: Morten mark as Skateparken
  trigger:
  - platform: state
    entity_id: device_tracker.morten_app
    to: Skateparken
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Skateparken
- id: Morten_mark_as_Gystadmarka_Ungdomsskole
  alias: Morten mark as Gystadmarka Ungdomsskole
  trigger:
  - platform: state
    entity_id: device_tracker.morten_app
    to: Gystadmarka Ungdomsskole
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.morten_status_dropdown
      option: Gystadmarka Ungdomsskole
- id: Morten_mark_as_extended_Borte
  alias: Morten mark as extended Borte
  trigger:
  - platform: state
    entity_id: input_select.morten_status_dropdown
    to: Borte
    for:
      hours: 24
  action:
  - service: input_select.select_option
    data_template:
      entity_id: input_select.morten_status_dropdown
      option: Bortreist
- id: Helen_mark_as_Akkurat_kommet_hjem
  alias: Helen mark as Kommet
  trigger:
  - platform: state
    entity_id: binary_sensor.helen_presence
    from: 'off'
    to: 'on'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Kommet
- id: Helen_mark_as_Hjemme
  alias: Helen mark as Hjemme
  trigger:
  - entity_id: input_select.helen_status_dropdown
    for: 0:05:00
    platform: state
    to: Kommet
  - entity_id: input_select.helen_status_dropdown
    from: Reist
    platform: state
    to: Kommet
  action:
  - data:
      entity_id: input_select.helen_status_dropdown
      option: Hjemme
    service: input_select.select_option
- id: Helen_mark_as_Akkurat_reist
  alias: Helen mark as Reist
  trigger:
  - platform: state
    entity_id: binary_sensor.helen_presence
    from: 'on'
    to: 'off'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Reist
- id: Helen_mark_as_Borte
  alias: Helen mark as Borte
  trigger:
  - platform: state
    entity_id: input_select.helen_status_dropdown
    to: Reist
    for:
      minutes: 5
  - platform: state
    entity_id: device_tracker.helen_app
    from: Jobb
    to: not_home
  - platform: state
    entity_id: device_tracker.helen_app
    from: Tine
    to: not_home
  - platform: state
    entity_id: device_tracker.helen_app
    from: Jessheim VGS
    to: not_home
  - platform: state
    entity_id: device_tracker.helen_app
    from: Gystadmarka Ungdomsskole
    to: not_home
  - platform: state
    entity_id: device_tracker.helen_app
    from: Skateparken
    to: not_home
  - platform: state
    entity_id: device_tracker.helen_app
    from: Sentrum
    to: not_home
  - platform: state
    entity_id: device_tracker.helen_app
    from: Torun
    to: not_home
  - platform: state
    entity_id: device_tracker.helen_app
    from: Ahus
    to: not_home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Borte
- id: Helen_mark_as_sentrum
  alias: Helen mark as sentrum
  trigger:
  - platform: state
    entity_id: device_tracker.helen_app
    to: Sentrum
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Sentrum
- id: Helen_mark_as_Torun
  alias: Helen mark as Torun
  trigger:
  - platform: state
    entity_id: device_tracker.helen_app
    to: Torun
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Torun
- id: Helen_mark_as_Jessheim VGS
  alias: Helen mark as Jessheim VGS
  trigger:
  - platform: state
    entity_id: device_tracker.helen_app
    to: Jessheim VGS
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Jessheim VGS
- id: Helen_mark_as_Skateparken
  alias: Helen mark as Skateparken
  trigger:
  - platform: state
    entity_id: device_tracker.helen_app
    to: Skateparken
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Skateparken
- id: Helen_mark_as_Gystadmarka_Ungdomsskole
  alias: Helen mark as Gystadmarka Ungdomsskole
  trigger:
  - platform: state
    entity_id: device_tracker.helen_app
    to: Gystadmarka Ungdomsskole
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Gystadmarka Ungdomsskole
- id: Helen_mark_as_Ahus
  alias: Helen mark as Gystadmarka Ungdomsskole
  trigger:
  - platform: state
    entity_id: device_tracker.helen_app
    to: Ahus
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.helen_status_dropdown
      option: Ahus
- id: Helen_mark_as_extended_Borte
  alias: Helen mark as extended Borte
  trigger:
  - platform: state
    entity_id: input_select.helen_status_dropdown
    to: Borte
    for:
      hours: 24
  action:
  - service: input_select.select_option
    data_template:
      entity_id: input_select.helen_status_dropdown
      option: Bortreist
- id: Karoline_mark_as_Akkurat_kommet_hjem
  alias: Karoline mark as Kommet
  trigger:
  - platform: state
    entity_id: binary_sensor.karoline_presence
    from: 'off'
    to: 'on'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Kommet
- id: Karoline_mark_as_Hjemme
  alias: Karoline mark as Hjemme
  trigger:
  - entity_id: input_select.karoline_status_dropdown
    for: 0:05:00
    platform: state
    to: Kommet
  - entity_id: input_select.karoline_status_dropdown
    from: Reist
    platform: state
    to: Kommet
  action:
  - data:
      entity_id: input_select.karoline_status_dropdown
      option: Hjemme
    service: input_select.select_option
- id: Karoline_mark_as_Akkurat_reist
  alias: Karoline mark as Reist
  trigger:
  - platform: state
    entity_id: binary_sensor.karoline_presence
    from: 'on'
    to: 'off'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Reist
- id: Karoline_mark_as_Borte
  alias: Karoline mark as Borte
  trigger:
  - platform: state
    entity_id: input_select.karoline_status_dropdown
    to: Reist
    for:
      minutes: 5
  - platform: state
    entity_id: device_tracker.karoline_app
    from: Jobb
    to: not_home
  - platform: state
    entity_id: device_tracker.karoline_app
    from: Tine
    to: not_home
  - platform: state
    entity_id: device_tracker.karoline_app
    from: Jessheim VGS
    to: not_home
  - platform: state
    entity_id: device_tracker.karoline_app
    from: Gystadmarka Ungdomsskole
    to: not_home
  - platform: state
    entity_id: device_tracker.karoline_app
    from: Skateparken
    to: not_home
  - platform: state
    entity_id: device_tracker.karoline_app
    from: Sentrum
    to: not_home
  - platform: state
    entity_id: device_tracker.karoline_app
    from: Torun
    to: not_home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Borte
- id: Karoline_mark_as_Jobb
  alias: Karoline mark as Jobb
  trigger:
  - platform: state
    entity_id: device_tracker.karoline_app
    to: Jobb
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Jobb
- id: Karoline_mark_as_Tine
  alias: Karoline mark as Tine
  trigger:
  - platform: state
    entity_id: device_tracker.karoline_app
    to: Tine
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Tine
- id: Karoline_mark_as_sentrum
  alias: Karoline mark as sentrum
  trigger:
  - platform: state
    entity_id: device_tracker.karoline_app
    to: Sentrum
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Sentrum
- id: Karoline_mark_as_Torun
  alias: Karoline mark as Torun
  trigger:
  - platform: state
    entity_id: device_tracker.karoline_app
    to: Torun
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Torun
- id: Karoline_mark_as_Jessheim VGS
  alias: Karoline mark as Jessheim VGS
  trigger:
  - platform: state
    entity_id: device_tracker.karoline_app
    to: Jessheim VGS
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Jessheim VGS
- id: Karoline_mark_as_Skateparken
  alias: Karoline mark as Skateparken
  trigger:
  - platform: state
    entity_id: device_tracker.karoline_app
    to: Skateparken
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Skateparken
- id: Karoline_mark_as_Gystadmarka_Ungdomsskole
  alias: Karoline mark as Gystadmarka Ungdomsskole
  trigger:
  - platform: state
    entity_id: device_tracker.karoline_app
    to: Gystadmarka Ungdomsskole
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.karoline_status_dropdown
      option: Gystadmarka Ungdomsskole
- id: Karoline_mark_as_extended_Borte
  alias: Karoline mark as extended Borte
  trigger:
  - platform: state
    entity_id: input_select.karoline_status_dropdown
    to: Borte
    for:
      hours: 24
  action:
  - service: input_select.select_option
    data_template:
      entity_id: input_select.karoline_status_dropdown
      option: Bortreist
- id: Emil_mark_as_Akkurat_kommet_hjem
  alias: Emil mark as Kommet
  trigger:
  - platform: state
    entity_id: binary_sensor.emil_presence
    from: 'off'
    to: 'on'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Kommet
- id: Emil_mark_as_Hjemme
  alias: Emil mark as Hjemme
  trigger:
  - entity_id: input_select.emil_status_dropdown
    for: 0:05:00
    platform: state
    to: Kommet
  - entity_id: input_select.emil_status_dropdown
    from: Reist
    platform: state
    to: Kommet
  action:
  - data:
      entity_id: input_select.emil_status_dropdown
      option: Hjemme
    service: input_select.select_option
- id: Emil_mark_as_Akkurat_reist
  alias: Emil mark as Reist
  trigger:
  - platform: state
    entity_id: binary_sensor.emil_presence
    from: 'on'
    to: 'off'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Reist
- id: Emil_mark_as_Borte
  alias: Emil mark as Borte
  trigger:
  - platform: state
    entity_id: input_select.emil_status_dropdown
    to: Reist
    for:
      minutes: 5
  - platform: state
    entity_id: device_tracker.emil_app
    from: Jobb
    to: not_home
  - platform: state
    entity_id: device_tracker.emil_app
    from: Tine
    to: not_home
  - platform: state
    entity_id: device_tracker.emil_app
    from: Jessheim VGS
    to: not_home
  - platform: state
    entity_id: device_tracker.emil_app
    from: Gystadmarka Ungdomsskole
    to: not_home
  - platform: state
    entity_id: device_tracker.emil_app
    from: Skateparken
    to: not_home
  - platform: state
    entity_id: device_tracker.emil_app
    from: Sentrum
    to: not_home
  - platform: state
    entity_id: device_tracker.emil_app
    from: Torun
    to: not_home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Borte
- id: Emil_mark_as_Jobb
  alias: Emil mark as Jobb
  trigger:
  - platform: state
    entity_id: device_tracker.emil_app
    to: Jobb
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Jobb
- id: Emil_mark_as_Tine
  alias: Emil mark as Tine
  trigger:
  - platform: state
    entity_id: device_tracker.emil_app
    to: Tine
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Tine
- id: Emil_mark_as_sentrum
  alias: Emil mark as sentrum
  trigger:
  - platform: state
    entity_id: device_tracker.emil_app
    to: Sentrum
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Sentrum
- id: Emil_mark_as_Torun
  alias: Emil mark as Torun
  trigger:
  - platform: state
    entity_id: device_tracker.emil_app
    to: Torun
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Torun
- id: Emil_mark_as_Jessheim VGS
  alias: Emil mark as Jessheim VGS
  trigger:
  - platform: state
    entity_id: device_tracker.emil_app
    to: Jessheim VGS
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Jessheim VGS
- id: Emil_mark_as_Skateparken
  alias: Emil mark as Skateparken
  trigger:
  - platform: state
    entity_id: device_tracker.emil_app
    to: Skateparken
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Skateparken
- id: Emil_mark_as_Gystadmarka_Ungdomsskole
  alias: Emil mark as Gystadmarka Ungdomsskole
  trigger:
  - platform: state
    entity_id: device_tracker.emil_app
    to: Gystadmarka Ungdomsskole
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.emil_status_dropdown
      option: Gystadmarka Ungdomsskole
- id: Emil_mark_as_extended_Borte
  alias: Emil mark as extended Borte
  trigger:
  - platform: state
    entity_id: input_select.emil_status_dropdown
    to: Borte
    for:
      hours: 24
  action:
  - service: input_select.select_option
    data_template:
      entity_id: input_select.emil_status_dropdown
      option: Bortreist
- id: Tobias_mark_as_Akkurat_kommet_hjem
  alias: Tobias mark as Kommet
  trigger:
  - platform: state
    entity_id: binary_sensor.tobias_presence
    from: 'off'
    to: 'on'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Kommet
- id: Tobias_mark_as_Hjemme
  alias: Tobias mark as Hjemme
  trigger:
  - entity_id: input_select.tobias_status_dropdown
    for: 0:05:00
    platform: state
    to: Kommet
  - entity_id: input_select.tobias_status_dropdown
    from: Reist
    platform: state
    to: Kommet
  action:
  - data:
      entity_id: input_select.tobias_status_dropdown
      option: Hjemme
    service: input_select.select_option
- id: Tobias_mark_as_Akkurat_reist
  alias: Tobias mark as Reist
  trigger:
  - platform: state
    entity_id: binary_sensor.tobias_presence
    from: 'on'
    to: 'off'
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Reist
- id: Tobias_mark_as_Borte
  alias: Tobias mark as Borte
  trigger:
  - platform: state
    entity_id: input_select.tobias_status_dropdown
    to: Reist
    for:
      minutes: 5
  - platform: state
    entity_id: device_tracker.tobias_app
    from: Jobb
    to: not_home
  - platform: state
    entity_id: device_tracker.tobias_app
    from: Tine
    to: not_home
  - platform: state
    entity_id: device_tracker.tobias_app
    from: Jessheim VGS
    to: not_home
  - platform: state
    entity_id: device_tracker.tobias_app
    from: Gystadmarka Ungdomsskole
    to: not_home
  - platform: state
    entity_id: device_tracker.tobias_app
    from: Skateparken
    to: not_home
  - platform: state
    entity_id: device_tracker.tobias_app
    from: Sentrum
    to: not_home
  - platform: state
    entity_id: device_tracker.tobias_app
    from: Torun
    to: not_home
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Borte
- id: Tobias_mark_as_Jobb
  alias: Tobias mark as Jobb
  trigger:
  - platform: state
    entity_id: device_tracker.tobias_app
    to: Jobb
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Jobb
- id: Tobias_mark_as_Tine
  alias: Tobias mark as Tine
  trigger:
  - platform: state
    entity_id: device_tracker.tobias_app
    to: Tine
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Tine
- id: Tobias_mark_as_sentrum
  alias: Tobias mark as sentrum
  trigger:
  - platform: state
    entity_id: device_tracker.tobias_app
    to: Sentrum
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Sentrum
- id: Tobias_mark_as_Torun
  alias: Tobias mark as Torun
  trigger:
  - platform: state
    entity_id: device_tracker.tobias_app
    to: Torun
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Torun
- id: Tobias_mark_as_Jessheim VGS
  alias: Tobias mark as Jessheim VGS
  trigger:
  - platform: state
    entity_id: device_tracker.tobias_app
    to: Jessheim VGS
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Jessheim VGS
- id: Tobias_mark_as_Skateparken
  alias: Tobias mark as Skateparken
  trigger:
  - platform: state
    entity_id: device_tracker.tobias_app
    to: Skateparken
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Skateparken
- id: Tobias_mark_as_Gystadmarka_Ungdomsskole
  alias: Tobias mark as Gystadmarka Ungdomsskole
  trigger:
  - platform: state
    entity_id: device_tracker.tobias_app
    to: Gystadmarka Ungdomsskole
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.tobias_status_dropdown
      option: Gystadmarka Ungdomsskole
- id: Tobias_mark_as_extended_Borte
  alias: Tobias mark as extended Borte
  trigger:
  - platform: state
    entity_id: input_select.tobias_status_dropdown
    to: Borte
    for:
      hours: 24
  action:
  - service: input_select.select_option
    data_template:
      entity_id: input_select.tobias_status_dropdown
      option: Bortreist
- id: ole_status_home_livingroom
  alias: Ole status Home stue
  trigger:
  - device_id: 348764a4f52e43018d7e438571ebba0f
    domain: zha
    platform: device
    subtype: remote_button_long_press
    type: remote_button_long_press
  action:
  - data:
      entity_id: input_select.ole_status_dropdown
      option: Hjemme
    service: input_select.select_option
  - data:
      variables:
        what: Ole er satt til hjemme
    entity_id: script.1591765433504
    service: script.turn_on
- id: ole_status_home_hall
  alias: Ole status Home gang
  trigger:
  - device_id: 9b70ab0f31e44bc7943a79cc5692a173
    domain: zha
    platform: device
    subtype: remote_button_long_press
    type: remote_button_long_press
  action:
  - data:
      entity_id: input_select.ole_status_dropdown
      option: Hjemme
    service: input_select.select_option
  - data:
      variables:
        what: Ole er satt til hjemme
    entity_id: media_player.1_livingroom_sonos
    service: script.turn_on
- id: ole_status_away
  alias: Ole status away
  trigger:
    platform: state
    entity_id: binary_sensor.noen_voksne_hjemme
    from: 'off'
    to: 'on'
  condition:
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.ole_status_dropdown
      option: Borte
- id: ha_theme_dark
  alias: HA Dark Theme
  trigger:
  - entity_id: input_select.time_of_day_dropdown
    from: Dagtid
    platform: state
    to: Natt
  action:
  - data_template:
      name: Google Dark Theme
    service: frontend.set_theme
- id: ha_theme_light
  alias: HA Light Theme
  trigger:
  - entity_id: input_select.time_of_day_dropdown
    from: Natt
    platform: state
    to: Dagtid
  action:
  - data_template:
      name: Google Light Theme
    service: frontend.set_theme
- id: Lights_turn_on_dimmed_lights_in_the_morning_weekdays
  alias: Lights turn on dimmed lights in the morning weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.morning.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - entity_id: scene.morgen
    service: scene.turn_on
- id: Lights_turn_on_normal_lights_weekdays
  alias: Lights turn on normal lights weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.day.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - entity_id: scene.normal
    service: scene.turn_on
- id: Lights_turn_down_lights_in_the_evening_weekdays
  alias: Lights turn down lights in the evening weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.evening.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'on'
    - condition: state
      entity_id: input_select.scene_status_dropdown
      state: Normal
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - entity_id: scene.kveld
    service: scene.turn_on
- id: Lights_turn_off_lights_in_the_evening_weekdays
  alias: Lights turn off lights in the evening weekdays
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.night.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'on'
    - condition: state
      entity_id: input_select.scene_status_dropdown
      state: Kveld
  action:
  - entity_id: scene.natta
    service: scene.turn_on
- id: Lights_turn_on_dimmed_lights_in_the_morning_weekends
  alias: Lights turn on dimmed lights in the morning weekends
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.morning_not_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - entity_id: scene.morgen
    service: scene.turn_on
- id: Lights_turn_on normal_lights_at_noon_weekends
  alias: Lights turn on normal lights weekends
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.day_not_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - entity_id: scene.normal
    service: scene.turn_on
- id: Lights_turn_down_lights_in_the_evening_weekends
  alias: Lights turn down lights in the evening weekends
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.evening_not_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'off'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
    - condition: state
      entity_id: input_select.scene_status_dropdown
      state: Normal
  action:
  - entity_id: scene.kveld
    service: scene.turn_on
- id: Lights_turn_off_lights_in_the_evening_weekends
  alias: Lights turn off lights in the evening weekends
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.night_not_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: 'off'
    - condition: state
      entity_id: input_select.scene_status_dropdown
      state: Kveld
  action:
  - entity_id: scene.natta
    service: scene.turn_on
- id: Lights_no_one_home
  alias: Lights no one home
  trigger:
    platform: state
    entity_id: binary_sensor.noen_hjemme
    from: 'on'
    to: 'off'
  condition:
    condition: time
    after: 07:00:00
    before: '21:30:00'
  action:
  - service: scene.turn_on
    entity_id: scene.ingen_hjemme
- id: Lights_someone_home
  alias: Lights someone home
  trigger:
    platform: state
    entity_id: binary_sensor.noen_hjemme
    from: 'off'
    to: 'on'
  condition:
    condition: time
    after: 07:00:00
    before: '21:30:00'
  action:
  - service: scene.turn_on
    entity_id: scene.normal
- id: Lights_button_control_normal_scene
  alias: Lights button control normal scene
  trigger:
  - device_id: 348764a4f52e43018d7e438571ebba0f
    domain: zha
    platform: device
    subtype: remote_button_short_press
    type: remote_button_short_press
  action:
  - service: scene.turn_on
    entity_id: scene.normal
- id: Lights_button_control_night_scene
  alias: Lights button control night scene
  trigger:
  - device_id: 348764a4f52e43018d7e438571ebba0f
    domain: zha
    platform: device
    subtype: remote_button_double_press
    type: remote_button_double_press
  action:
    service: scene.turn_on
    entity_id: scene.natta
- id: Lights_dropdown_control_normal_scene
  alias: Lights dropdown control normal scene
  trigger:
    platform: state
    entity_id: input_select.scene_status_dropdown
    to: Normal
  action:
    service: scene.turn_on
    entity_id: scene.normal
- id: Lights_dropdown_control_morgen_scene
  alias: Lights dropdown control morgen scene
  trigger:
    platform: state
    entity_id: input_select.scene_status_dropdown
    to: Morgen
  action:
    service: scene.turn_on
    entity_id: scene.morgen
- id: Lights_dropdown_control_kveld_scene
  alias: Lights dropdown control kveld scene
  trigger:
    platform: state
    entity_id: input_select.scene_status_dropdown
    to: Kveld
  action:
    service: scene.turn_on
    entity_id: scene.kveld
- id: Lights_dropdown_control_film_scene
  alias: Lights dropdown control film scene
  trigger:
    platform: state
    entity_id: input_select.scene_status_dropdown
    to: Film
  action:
    service: scene.turn_on
    entity_id: scene.film
- id: Lights_dropdown_control_strikke_scene
  alias: Lights dropdown control strikke scene
  trigger:
    platform: state
    entity_id: input_select.scene_status_dropdown
    to: Strikke
  action:
    service: scene.turn_on
    entity_id: scene.strikke
- id: Lights_dropdown_control_night_scene
  alias: Lights dropdown control night scene
  trigger:
    platform: state
    entity_id: input_select.scene_status_dropdown
    to: Natta
  action:
    service: scene.turn_on
    entity_id: scene.natta
- id: Lights_dropdown_control_ingen_hjemme_scene
  alias: Lights dropdown control ingen hjemme scene
  trigger:
    platform: state
    entity_id: input_select.scene_status_dropdown
    to: Ingen_hjemme
  action:
    service: scene.turn_on
    entity_id: scene.ingen_hjemme
- id: medicine_helen_evening
  alias: medicine helen evening
  trigger:
    platform: time
    at: '20:00:00'
  condition:
    condition: state
    entity_id: device_tracker.helen_iphone
    state: home
  action:
  - service: notify.mobile_app_helen_app
    data:
      message: Tid for medisiner
      data:
        push:
          badge: 5
- id: medicine_helen_daytime
  alias: medicine helen daytime
  trigger:
    platform: time
    at: '14:00:00'
  action:
  - service: notify.mobile_app_helen_app
    data:
      message: Tid for medisiner
      data:
        push:
          badge: 5
- id: hassio_update
  alias: Hassio update
  trigger:
    platform: state
    entity_id: binary_sensor.updater
    to: 'on'
  action:
  - service: notify.mobile_app_morten_app
    data:
      message: Det er en oppdatering tilgjengelig for home assistant
- id: 2_bedroom_hm_heater_on_morning_weekdays
  alias: 2 bedroom hm heater on morning weekdays
  description: ''
  trigger:
  - at: 06:15:00
    platform: time
  condition:
  - condition: state
    entity_id: binary_sensor.workday_today
    state: 'on'
  - below: '15'
    condition: numeric_state
    entity_id: sensor.netatmo_outside_temperature
  action:
  - data:
      entity_id: climate.2_bedroom_hm_thermostat
      hvac_mode: heat
      temperature: 22
    service: climate.set_temperature
- id: hacs_update
  alias: Hacs update
  description: ''
  trigger:
  - entity_id: sensor.hacs
    from: '0'
    platform: state
  condition: []
  action:
  - data:
      message: Det er en oppdatering tilgjengelig for HACS
    service: notify.mobile_app_morten_app
- id: 2_bedroom_hm_heater_off
  alias: 2 bedroom hm heater off
  description: ''
  trigger:
  - at: '16:00:00'
    platform: time
  condition: []
  action:
  - data:
      entity_id: climate.2_bedroom_hm_thermostat
      hvac_mode: heat
      temperature: 12
    service: climate.set_temperature
- id: '1586451329005'
  alias: 2 Bedroom o light on off
  description: ''
  trigger:
  - device_id: b46061822edc4ead9ff4663df0e78c78
    domain: zha
    platform: device
    subtype: turn_on
    type: remote_button_short_press
  condition: []
  action:
  - data: {}
    entity_id: light.2_bedroom_o_light
    service: light.toggle
- id: '1586457992859'
  alias: 2 Bedroom o light dim down
  description: ''
  trigger:
  - device_id: b46061822edc4ead9ff4663df0e78c78
    domain: zha
    platform: device
    subtype: dim_down
    type: remote_button_short_press
  condition: []
  action:
  - device_id: f014e0cff3564a7693cad86ed0d57b46
    domain: light
    entity_id: light.2_bedroom_o_light
    type: brightness_decrease
- id: '1586458026506'
  alias: 2 bedroom o light dim up
  description: ''
  trigger:
  - device_id: b46061822edc4ead9ff4663df0e78c78
    domain: zha
    platform: device
    subtype: dim_up
    type: remote_button_short_press
  condition: []
  action:
  - device_id: f014e0cff3564a7693cad86ed0d57b46
    domain: light
    entity_id: light.2_bedroom_o_light
    type: brightness_increase
- id: '1586459138178'
  alias: 2 bedroom o light color left
  description: ''
  trigger:
  - device_id: b46061822edc4ead9ff4663df0e78c78
    domain: zha
    platform: device
    subtype: left
    type: remote_button_short_press
  condition: []
  action:
    service: light.turn_on
    entity_id: light.2_bedroom_o_light
    data_template:
      hs_color:
      - '{{ (30 + (state_attr(''light.2_bedroom_o_light'', ''hs_color'')[0] or 0))
        % 360 }}'
      - 100
      brightness_pct: 100
      transition: 1
- id: '1586462783558'
  alias: 2 bedroom o color right
  description: ''
  trigger:
  - device_id: b46061822edc4ead9ff4663df0e78c78
    domain: zha
    platform: device
    subtype: right
    type: remote_button_short_press
  condition: []
  action:
    service: light.turn_on
    entity_id: light.2_bedroom_o_light
    data_template:
      hs_color:
      - '{{ (30 - (state_attr(''light.2_bedroom_o_light'', ''hs_color'')[0] or 0))
        % 360 }}'
      - 100
      brightness_pct: 100
      transition: 1
- id: '1586631239525'
  alias: 2 Bedroom o light white
  description: ''
  trigger:
  - device_id: b46061822edc4ead9ff4663df0e78c78
    domain: zha
    platform: device
    subtype: left
    type: remote_button_long_press
  - device_id: b46061822edc4ead9ff4663df0e78c78
    domain: zha
    platform: device
    subtype: right
    type: remote_button_long_press
  condition: []
  action:
  - data:
      rgb_color:
      - 255
      - 255
      - 255
    entity_id: light.2_bedroom_o_light
    service: light.turn_on
- id: '1587455409827'
  alias: test datetime
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.day.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition: []
  action:
  - data:
      message: test virker
    service: notify.mobile_app_morten_app
- id: '1587470665669'
  alias: 2 bedroom o set temp 16 during school
  description: ''
  trigger:
  - at: 09:30:00
    platform: time
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_today
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alle_bortreist
      state: 'off'
  action:
  - data:
      entity_id: climate.2_bedroom_o_thermostat
      hvac_mode: heat
      temperature: 16
    entity_id: climate.2_bedroom_o_thermostat
    service: climate.set_temperature
- id: '1587548127797'
  alias: Set time of day to Dagtid on non workday
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.morning_not_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: state
    entity_id: binary_sensor.workday_today
    state: 'off'
  action:
  - data:
      entity_id: input_select.time_of_day_dropdown
      option: Dagtid
    entity_id: input_select.time_of_day_dropdown
    service: input_select.select_option
- id: '1587548317442'
  alias: Set time of day to Natt before non workday
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == (states.input_datetime.night_not_workday.attributes.timestamp
      | int | timestamp_custom("%H:%M", False)) }}'
  condition:
  - condition: state
    entity_id: binary_sensor.workday_tomorrow
    state: 'off'
  action:
  - data:
      entity_id: input_select.time_of_day_dropdown
      option: Natt
    entity_id: input_select.time_of_day_dropdown
    service: input_select.select_option
- id: '1589192438340'
  alias: Varsel restavfall
  description: ''
  trigger:
  - platform: template
    value_template: ">\n        {% set d = (strptime(states('sensor.restavfall'),\
      \ '%d/%m')\n                    .timestamp() - 246060)|timestamp_custom('%m-%d')\
      \ %}\n        {{ states('sensor.date_time') == d ~ ', 13:13' }}"
  condition: []
  action:
  - data:
      message: test test
    service: notify.mobile_app_morten_app
- id: '1589787378859'
  alias: garden mailbox
  description: ''
  trigger:
  - entity_id: binary_sensor.garden_mailbox
    for: 00:00:45
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data: {}
    entity_id: input_select.mail
    service: input_select.select_next
- id: '1589790826624'
  alias: Mail in mailbox
  description: ''
  trigger:
  - entity_id: input_select.mail
    platform: state
    to: Post
  condition: []
  action:
  - data:
      data:
        push:
          badge: 5
      message: Nå er det post i postkassa
    service: notify.mobile_app_morten_app
  - data:
      data:
        push:
          badge: 5
      message: Nå er det post i postkassa
    service: notify.mobile_app_helen_app
  - data:
      variables:
        what: Nå er det post i postkassa
    data_template:
      volume_level: 0.3
    entity_id: script.1591765433504
    service: script.turn_on
- id: '1589797434368'
  alias: garage Nissan relee off
  description: ''
  trigger:
  - payload: 'ON'
    platform: mqtt
    topic: cmnd/garage_nissan/POWER
  condition: []
  action:
  - delay: 00:00:01
  - data:
      payload: 'OFF'
      topic: cmnd/garage_nissan/POWER
    service: mqtt.publish
- id: '1589797517991'
  alias: garage Tesla relee off
  description: ''
  trigger:
  - payload: 'ON'
    platform: mqtt
    topic: cmnd/garage_tesla/POWER
  condition: []
  action:
  - delay: 00:00:01
  - data:
      payload: 'OFF'
      topic: cmnd/garage_tesla/POWER
    service: mqtt.publish
- id: '1590273387229'
  alias: 2 bedroom e chromecast pause
  description: ''
  trigger:
  - entity_id: sensor.emil_status
    for: 00:10:00
    platform: state
    to: borte
  condition:
  - condition: state
    entity_id: media_player.2_bedroom_e_chromecast
    state: playing
  action:
  - data: {}
    entity_id: media_player.2_bedroom_e_chromecast
    service: media_player.media_pause
- id: '1590396909538'
  alias: garden terrace lights off
  description: ''
  trigger:
  - event: sunrise
    platform: sun
  condition:
  - condition: device
    device_id: a6cc3e0ff91d4ed88be3e33050756c90
    domain: switch
    entity_id: switch.garden_terrace_lights
    type: is_on
  action:
  - data: {}
    entity_id: switch.garden_terrace_lights
    service: switch.turn_off
